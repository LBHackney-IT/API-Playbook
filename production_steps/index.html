<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/API-Playbook/blog/rss.xml" title="Hackney API Playbook Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/API-Playbook/blog/atom.xml" title="Hackney API Playbook Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney API Playbook" href="/API-Playbook/opensearch.xml"><title data-react-helmet="true">Details to complete production checklist | Hackney API Playbook</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Details to complete production checklist | Hackney API Playbook"><meta data-react-helmet="true" name="description" content="Deployment"><meta data-react-helmet="true" property="og:description" content="Deployment"><meta data-react-helmet="true" property="og:url" content="https://lbhackney-it.github.io/API-Playbook/API-Playbook/production_steps"><link data-react-helmet="true" rel="shortcut icon" href="/API-Playbook/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://lbhackney-it.github.io/API-Playbook/API-Playbook/production_steps"><link rel="stylesheet" href="/API-Playbook/styles.2116970b.css">
<link rel="stylesheet" href="/API-Playbook/main.4a16e2e4.css">
<link rel="preload" href="/API-Playbook/styles.01b89e98.js" as="script">
<link rel="preload" href="/API-Playbook/runtime~main.cfca19db.js" as="script">
<link rel="preload" href="/API-Playbook/main.6f7cd9ac.js" as="script">
<link rel="preload" href="/API-Playbook/1.49797303.js" as="script">
<link rel="preload" href="/API-Playbook/2.dbb530b5.js" as="script">
<link rel="preload" href="/API-Playbook/70.f3103812.js" as="script">
<link rel="preload" href="/API-Playbook/73.15ba470c.js" as="script">
<link rel="preload" href="/API-Playbook/935f2afb.bd8c0568.js" as="script">
<link rel="preload" href="/API-Playbook/17896441.14cf786f.js" as="script">
<link rel="preload" href="/API-Playbook/31c4c3d2.5eaff28a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/API-Playbook/"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">API Playbook</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/API-Playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/API-Playbook/"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/API-Playbook/img/logo-long.svg" alt="API Playbook" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">API Playbook</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/API-Playbook" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Details to complete production checklist</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="deployment"></a>Deployment<a class="hash-link" href="#deployment" title="Direct link to heading">#</a></h2><p>Once your PR has been merged into master branch, head to the correct view in CircleCI - this is often easiest via clicking the check (or cross) symbol next to your merged PR in the GitHub repoâ€™s list of master branch commits - use the â€œDetailsâ€ links to go to the relevant CircleCI view</p><p>Once in CircleCI, make sure youâ€™re viewing the entire workflow for the build by checking the submenu on the left, and making sure the view URL includes workflows in its path i.e.: <a href="https://app.circleci.com/pipelines/github/LBHackney-IT/person-api" target="_blank" rel="noopener noreferrer">https://app.circleci.com/pipelines/github/LBHackney-IT/person-api</a>
By navigating to the correct workflow, you can monitor the deployment of the application and manually permit the â€œDeploy to Stagingâ€ and â€œDeploy to Productionâ€ jobs if the prerequisite jobs (e.g. automated test runs, Terraform apply commands) succeed - or, if any jobs fail, you can click through to the job to debug the issue(s)</p><p>Naming Conventions
To review the endpoint URLs, check the controller(s) within your API projectâ€™s codebase for route statements like:</p><p>[Route(&quot;api/v1/persons&quot;)]
Youâ€™ll also want to check any expected query parameters, which you should find in one or more files with Param in the filename (e.g. ResidentQueryParam.cs)
If any of these route statements or query parameters seem incorrect in their names, including the casing, refer to the relevant Swagger documentation for the API and update the codebase (or the Swagger doc) as required
If any route statements have been updated, be sure to double-check that they work and provide the expected responses, once the changes have been deployed to production, using the steps detailed in the â€˜Responsesâ€™ section of this document
There are also naming conventions to follow API Playbook link for responses</p><p>Responses
To test the APIâ€™s endpoints:
Visit the API Gateway dashboard within the correct region (e.g. <a href="https://eu-west-2.console.aws.amazon.com/apigateway/main/apis" target="_blank" rel="noopener noreferrer">https://eu-west-2.console.aws.amazon.com/apigateway/main/apis</a>)
Select the API youâ€™d like to test
Click the â€œAnyâ€ resource option and then the â€œTestâ€ button:</p><p>From the next view, you can choose a request method (such as GET), enter the path, set â€œstage variablesâ€ (like environment variables) and any request parameters, and then scroll down to click the â€œTestâ€ button to see what the APIâ€™s response to your request is
If the response is an error, you should be able to dig into the stack trace shown to begin debugging
Make test requests of each of the APIâ€™s endpoints, looking for potential issues with:
Response structures
Do they match what you expect/the Swagger doc?
Are there any unexpected duplications?
Have enums been transformed correctly into strings?
Do all possible combinations of search parameters work as expected?
Do all possible variations of the limit and cursor parameters work as expected?
Response times
Are there requests that might take longer than the default lambda timeout of 6s to complete, e.g. searching all records with a high limit parameter?
Try to identify what kind of requests might trigger one or more long-running database queries - and see below for instructions for enabling slow query logging on any RDS database instances</p><p>Configuration and security
Make sure slow query logging is enabled on any relevant RDS database instances by [steps to check or add to Terraform config?][see related Production testing checklist to complete this section]</p><p>Errors
[see related Production testing checklist to complete this section]</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/API-Playbook/edit/master/docs/production_steps.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deployment" class="table-of-contents__link">Deployment</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/API-Playbook/styles.01b89e98.js"></script>
<script src="/API-Playbook/runtime~main.cfca19db.js"></script>
<script src="/API-Playbook/main.6f7cd9ac.js"></script>
<script src="/API-Playbook/1.49797303.js"></script>
<script src="/API-Playbook/2.dbb530b5.js"></script>
<script src="/API-Playbook/70.f3103812.js"></script>
<script src="/API-Playbook/73.15ba470c.js"></script>
<script src="/API-Playbook/935f2afb.bd8c0568.js"></script>
<script src="/API-Playbook/17896441.14cf786f.js"></script>
<script src="/API-Playbook/31c4c3d2.5eaff28a.js"></script>
</body>
</html>