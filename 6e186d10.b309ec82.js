(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{102:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return o})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return p}));var r=a(3),n=a(7),i=(a(0),a(141)),l={id:"alerting",title:"Alerting"},o={unversionedId:"alerting",id:"alerting",isDocsHomePage:!1,title:"Alerting",description:"Application monitoring and alerting",source:"@site/docs/alerting.md",slug:"/alerting",permalink:"/API-Playbook/alerting",editUrl:"https://github.com/LBHackney-IT/API-Playbook/edit/master/docs/alerting.md",version:"current",sidebar:"docs",previous:{title:"Composing Your Application With Multiple Docker Containers",permalink:"/API-Playbook/multiple_docker_containers"},next:{title:"Application Logging Guidelines",permalink:"/API-Playbook/application_logging"}},c=[{value:"Application monitoring and alerting",id:"application-monitoring-and-alerting",children:[]},{value:"Metric filters",id:"metric-filters",children:[{value:"Filter and Pattern Syntax",id:"filter-and-pattern-syntax",children:[]},{value:"Metric filters that should be created per API",id:"metric-filters-that-should-be-created-per-api",children:[]},{value:"Alarms should be created for the following metric filters",id:"alarms-should-be-created-for-the-following-metric-filters",children:[]}]},{value:"Availability monitoring and alerting",id:"availability-monitoring-and-alerting",children:[]},{value:"AWS CloudWatch Canaries",id:"aws-cloudwatch-canaries",children:[{value:"AWS Canaries for APIs",id:"aws-canaries-for-apis",children:[]},{value:"AWS Canaries for front end applications",id:"aws-canaries-for-front-end-applications",children:[]}]},{value:"AWS CloudWatch Alarms",id:"aws-cloudwatch-alarms",children:[]}],s={toc:c};function p(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"application-monitoring-and-alerting"},"Application monitoring and alerting"),Object(i.b)("p",null,"In Hackney, we use AWS CloudWatch to implement monitoring and alerting."),Object(i.b)("p",null,"Any logs created in our APIs are recorded and accessible in AWS CloudWatch. Creation of log groups is automated via the current serverless setup."),Object(i.b)("h2",{id:"metric-filters"},"Metric filters"),Object(i.b)("h3",{id:"filter-and-pattern-syntax"},"Filter and Pattern Syntax"),Object(i.b)("p",null,"Metric filters are a useful feature that allows you to find patterns and terms in your logs. Following the logging standards identified earlier in this document, metric filters can be created to easily identify logs related to a certain phrase or term like ",Object(i.b)("inlineCode",{parentName:"p"},"ERROR"),"."),Object(i.b)("p",null,"Using the filters, developers can easily narrow down the logs they see to only the ones related to any error that has occurred, hiding all other logs such as ones for successful requests."),Object(i.b)("p",null,"CloudWatch also provides a way to create alarms based on metric filters, so we can get notified if a log with matching a certain pattern/term has occurred."),Object(i.b)("h3",{id:"metric-filters-that-should-be-created-per-api"},"Metric filters that should be created per API"),Object(i.b)("p",null,"TBC"),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"Needs to be filters we want commonly available for each API")),Object(i.b)("h3",{id:"alarms-should-be-created-for-the-following-metric-filters"},"Alarms should be created for the following metric filters"),Object(i.b)("p",null,"TBC"),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"Need to decide which logs should have an alarm associated with them")),Object(i.b)("h2",{id:"availability-monitoring-and-alerting"},"Availability monitoring and alerting"),Object(i.b)("p",null,"We use AWS CloudWatch Canaries to monitor the availability of our APIs and front-end applications."),Object(i.b)("h2",{id:"aws-cloudwatch-canaries"},"AWS CloudWatch Canaries"),Object(i.b)("h3",{id:"aws-canaries-for-apis"},"AWS Canaries for APIs"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Set to run every 5 mins")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"A canary invokes an API endpoint to check it\u2019s availability")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Needs to be set up per API endpoint to ensure all endpoints provided by an API are functioning as expected")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"The current creation process for a canary is ",Object(i.b)("strong",{parentName:"p"},"manual")))),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"/uptime_monitoring"},"See the guidance for Canaries here")),Object(i.b)("h3",{id:"aws-canaries-for-front-end-applications"},"AWS Canaries for front end applications"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Can monitor the availability of a web page")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Alarms can be set to alert if availability of a given web page falls down")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Logs recorded can be used to identify performance issues associated with loading a specific item")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Can check for broken links")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"A max number of links to follow is set up")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"The canary crawls through the links and returns the first broken link identified"))),Object(i.b)("h2",{id:"aws-cloudwatch-alarms"},"AWS CloudWatch Alarms"),Object(i.b)("p",null,"We also use CloudWatch alarms to monitor for specific events in the log streams."),Object(i.b)("p",null,"Specific metrics can be established as triggers on application logs which can fire off alerts in the form of emails or other messaging mediums.  We can create up to 5000 alarms per region per account which should give us sufficient capacity."),Object(i.b)("p",null,"It may also be possible to consolidate these alarms if we have a standard format for logs (this may also be achievable by creating composite alarms but uses up available alarms."))}p.isMDXComponent=!0},141:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return m}));var r=a(0),n=a.n(r);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=n.a.createContext({}),p=function(e){var t=n.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},b=function(e){var t=p(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},u=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=p(a),u=r,m=b["".concat(l,".").concat(u)]||b[u]||d[u]||i;return a?n.a.createElement(m,o(o({ref:t},s),{},{components:a})):n.a.createElement(m,o({ref:t},s))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=a[s];return n.a.createElement.apply(null,l)}return n.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);